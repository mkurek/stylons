<!DOCTYPE html> 
<html> 
<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" /> 

<!-- Loading sencha touch files: -->
<link rel="stylesheet" href="lib/sencha/resources/css/apple.css" type="text/css" media="screen"/>
<script src="lib/sencha/sencha-touch.js" type="text/javascript"></script>

<!-- HISTORY API
<script src="lib/History/history.js" type="text/javascript"></script>
<script src="lib/History/history.adapter.native.js" type="text/javascript"></script>
-->

<!-- Loading dipatcher files : -->
<script src="lib/pysencha/dispatcher.js" type="text/javascript"></script>
<script src="lib/pysencha/SenchaAdapter.js" type="text/javascript"></script> 
<script src="lib/pysencha/parser.js" type="text/javascript"></script>
<script src="lib/pysencha/History.js" type="text/javascript"></script>

<!-- initial config -->
<script type="text/javascript">
var sd = {
	slots : [{
		"slot" : "screen",
		"id" : "screen",
		"url" : "index",
		"slots" : [{
			"slot" : "top",
			"id" : "menu",
			"url" : "menu/show",
			"slots" : [{
				"slot" : "top",
				"id" : "menuToolbar",
				"url" : "menu/toolbar",
				"slots" : []
			}, {
				"slot" : "bottom",
				"id" : "menuList",
				"url" : "menu/list",
				"slots" : []
			}]
		}, {
			"slot" : "bottom",
			"id" : "menuTabBar",
			"url" : "tabBar/menu",
			"slots" : []
		}]
	}]
};
var des = {
	"items" : [{
		"slot" : "screen",
		"id" : "screen",
		"items" : [{
			"slot" : "top",
			"id" : "menu",
			"items" : [{
				"slot" : "top",
				"id" : "menuToolbarFromScreen",
				"items" : [],
				"dockedItems" : []
			}, {
				"slot" : "bottom",
				"id" : "menuListFromScreen",
				"items" : [],
				"dockedItems" : []
			}],
			"dockedItems" : []
		}, {
			"slot" : "bottom",
			"id" : "menuTabBarFromScreen",
			"items" : [],
			"dockedItems" : []
		}],
		"dockedItems" : []
	}],
	"dockedItems" : []
};
var sd2 = {
	slots : [{
		"slot" : "screen",
		"id" : "screen",
		"url" : "index",
		"slots" : [{
			"slot" : "top",
			"id" : "menu",
			"url" : "menu/show",
			"slots" : [{
				"slot" : "top",
				"id" : "menuToolbar",
				"url" : "menu/toolbar",
				"slots" : []
			}]
		}, {
			"slot" : "bottom",
			"id" : "menuTabBar",
			"url" : "tabBar/menu",
			"slots" : []
		}]
	}]
};

var sd3 = {
		slots : [{
			"slot" : "screen",
			"id" : "screen2",
			"url" : "index",
			"slots" : [{
				"slot" : "top",
				"id" : "menu",
				"url" : "menu/show",
				"slots" : [{
					"slot" : "top",
					"id" : "menuToolbar",
					"url" : "menu/toolbar",
					"slots" : []
				}]
			}]
		}]
	};

function randomString(len)
{
    var text = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

    for( var i=0; i < len; i++ )
        text += possible.charAt(Math.floor(Math.random() * possible.length));

    return text;
}

function init()
{
// proper content

var page = Dispatcher.getPage();

// sencha setup
/*
Ext.setup({
	tabletStartupScreen: 'tablet_startup.png',
	phoneStartupScreen: 'phone_startup.png',
	icon: 'icon.png',
	glossOnIcon: false,
	onReady: function(){
		page = new Ext.Panel({
			fullscreen : true, 
			id: 'panel', 
			slot: 'panel',
		});
	}
});	
*/


// History initialization
// call Dispatcher.action for current url
Dispatcher.action(History.cleanToken(window.location.hash /*|| Dispatcher.Config().defaultURL*/), true);

// init history handling
History.init();

// manually trigger hashchange event handler (could not use hashchange trigger -
// some browsers still don't have this)
History.onHashChange();
}
</script>

<body onload="init();">
<button id="btn" type="button" onclick="Dispatcher.action(randomString(5));">Change hash</button>
<div id="a">
	
</div>
</body>
</head>
</html>